<?xml version="1.0" encoding="UTF-8" ?>
<openerp>
    <data>
        <record id="recurrent_model_form" model="ir.ui.view">
            <field name="name">recurrent.model.form</field>
            <field name="model">recurrent.model</field>
            <field name="arch" type="xml">
                <form string="Recurrences" version="7.0">
                    <group col="6" colspan="6">
                        <field name="name" colspan="3"/>
                        <newline/>
                        <field name="allday" colspan="3" invisible="1"/>
                        <newline/>
                        <field name="date_from" colspan="2"/>
                        <label for="duration" string="Duration (days)."
                               colspan="1"
                               attrs="{'invisible': [('allday','!=',
                                                          True)]}"/>
                        <field nolabel="1" name="duration" colspan="1"
                               attrs="{'invisible': [('allday','!=',
                                                          True)],
                                       'required': [('allday','=',
                                                          True)]}"/>
                        <newline/>
                        <field name="is_recurrent" colspan="3" readonly="1"/>
                    </group>
                    <group col="6" colspan="6" string="Recurrence pattern"
                           attrs="{'invisible': [('is_recurrent','!=',
                                                  True)]}">
                        <field name="interval" colspan="1"
                               attrs="{'required': [('is_recurrent','=',
                                                     True)]}"/>
                        <field name="freq" colspan="4" nolabel="1"
                               attrs="{'required': [('is_recurrent','=',
                                                     True)]}"/>
                        <newline/>
                        <group attrs="{'invisible':
                                               [('freq', '!=', 'yearly')]}"
                               col="2"
                               colspan="2">
                            <field name="is_easterly" colspan="2"/>
                            <field name="byeaster" colspan="2"
                                   attrs="{'invisible':
                                                   [('is_easterly', '=',
                                                     False)]}"
                                   placeholder="eg: 39 or -2"
                                   help="Count of days from easter, eg: 1(monday after easter) or -2(friday before easter)"/>
                            <field name="months" colspan="2"
                                   attrs="{'invisible':
                                                   [('is_easterly', '=',
                                                     True)]}"/>
                        </group>
                        <group attrs="{'invisible':
                                                   ['|',('freq', 'not in',
                                                     ['monthly', 'yearly']),
                                                    ('is_easterly', '=',
                                                     True)]}" col="2"
                               colspan="2">
                            <field name="days_option" colspan="2"/>
                            <newline/>
                            <field name="by_week_day" colspan="2"
                                   attrs="{'invisible':
                                                   [('days_option', '!=',
                                                     'week_day')]}"/>
                            <field name="monthly_day" colspan="2"
                                   attrs="{'invisible':
                                                   [('days_option', '!=',
                                                     'month_day')]}"
                                   placeholder="eg: 1 or -1 or 15"
                                   help="Days of month, eg: 1(first day) or -1(last day)"/>
                        </group>
                        <group attrs="{'invisible':[('freq', '!=',
                                                     'weekly'), '|', ('freq', '!=',
                                                     'monthly'), ('days_option', '!=',
                                                     'week_day'),'|', '|', ('freq', '!=',
                                                     'yearly'), ('days_option', '!=',
                                                     'week_day'), ('is_easterly', '!=',
                                                     False)]}" col="2"
                               colspan="2">
                            <field name="mo" colspan="2"/>
                            <field name="tu" colspan="2"/>
                            <field name="we" colspan="2"/>
                            <field name="th" colspan="2"/>
                            <field name="fr" colspan="2"/>
                            <field name="sa" colspan="2"/>
                            <field name="su" colspan="2"/>
                        </group>
                    </group>
                    <group string="Range of recurrence"
                           attrs="{'invisible': [('is_recurrent','!=',
                                                  True)]}">
                        <field name="end_type" colspan="3"/>
                        <newline/>
                        <field name="count"
                               attrs="{'invisible': [('end_type', '!=',
                                                      'count')]}"/>
                        <field name="until"
                               attrs="{'invisible': [('end_type', '!=',
                                                      'until')]}"/>
                    </group>
                    <label for="description"/>
                    <field name="description"/>
                </form>
            </field>
        </record>

        <record id="recurrent_model_calendar" model="ir.ui.view">
            <field name="name">recurrent.model.calendar</field>
            <field name="model">recurrent.model</field>
            <field name="type">calendar</field>
            <field name="arch" type="xml">
                <calendar string="Recurrences" date_start="date"
                          color="name" date_delay="calendar_duration">
                    <field name="name"/>
                </calendar>
            </field>
        </record>
    </data>
</openerp>