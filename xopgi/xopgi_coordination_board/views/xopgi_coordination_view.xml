<?xml version="1.0"?>
<openerp>
  <data>
    <!-- Sale Orders filters -->
    <record model="ir.ui.view" id="view_sale_order_filter_inh">
      <field name="name">sale.order.search</field>
      <field name="model">sale.order</field>
      <field name="inherit_id" ref="sale.view_sales_order_filter"/>
      <field name="arch" type="xml">
        <filter name="my_sale_orders_filter" position="after">
          <separator/>
          <filter string="Coordinate by me " name="coordinate_by_me"
                  domain="[('coordinator_id', '=', uid)]"/>
        </filter>
      </field>
    </record>

    <!-- Coordination analysis filters -->
    <record id="coordination_performance_reports_view_search_inh"
            model="ir.ui.view">
      <field name="name">coordination_performance_report.search.inh</field>
      <field name="model">xopgi_operations_performance.coordperf_report</field>
      <field name="inherit_id"
             ref="xopgi_operations_performance.coordination_performance_reports_view_search"/>
      <field name="arch" type="xml">
        <xpath expr="//field[@name='partner_id']" position="after">
          <separator/>
          <filter string="This month " name="this_month"
                  domain="[
                    ('account_analytic_id.create_date', '&gt;=', datetime.datetime.combine(
                      context_today().replace(day=1), datetime.time(0,0,0))
                  ]"/>
          <filter string="Last month " name="last_month"
                  domain="[
                    '&amp;',
                    ('account_analytic_id.create_date', '&lt;', datetime.datetime.combine(
                      context_today().replace(day=1), datetime.time(0,0,0)),
                    ('account_analytic_id.create_date', '&gt;=', datetime.datetime.combine(
                      (context_today() - datetime.timedelta(
                      days=30)).replace(day=1), datetime.time(0,0,0))
                  ]"/>
        </xpath>
      </field>
    </record>

    <!-- Analytic account filters -->
    <record id="view_account_analytic_account_search_inh" model="ir.ui.view">
      <field name="name">account.analytic.account.search.inh</field>
      <field name="model">account.analytic.account</field>
      <field name="inherit_id" ref="account.view_account_analytic_account_search"/>
      <field name="arch" type="xml">
        <xpath expr="//field[@name='user_id']" position="after">
          <separator/>
          <filter string="Assigned to me "
                  name="assigned_to_me"
                  domain="[
                    ('dossier', '=', True),
                    ('manager_id', '=', uid)
                  ]"/>
          <separator/>
          <filter string="Arrivals next 21 days "
                  name="arrival_21_days"
                  domain="[
                    ('dossier', '=', True),
                    ('project_ids.arrival_date', '&gt;=', datetime.datetime.combine(
                      context_today(), datetime.time(0,0,0))),
                    ('project_ids.arrival_date', '&lt;=', datetime.datetime.combine(
                      context_today() + datetime.timedelta(days=21),
                      datetime.time(23,59,59)))
                  ]"/>
          <filter string="Arrivals next month "
                  name="arrival_next_month"
                  domain="[
                    ('dossier', '=', True),
                    ('project_ids.arrival_date', '&gt;', datetime.datetime.combine(
                      context_today() + datetime.timedelta(days=21),
                      datetime.time(23,59,59)))
                    ('project_ids.arrival_date', '&lt;=', datetime.datetime.combine(
                      context_today() + datetime.timedelta(days=30),
                      datetime.time(23,59,59)))
                  ]"/>
          <filter string="Closed before last week "
                  name="closed_before_last_week"
                  domain="[
                    ('dossier', '=', True),
                    ('project_ids.departure_date', '&lt;=', datetime.datetime.combine(
                      context_today() - datetime.timedelta(days=15),
                      datetime.time(0,0,0)))
                  ]"/>
          <filter string="Closed last week "
                  name="closed_last_week"
                  domain="[
                    ('dossier', '=', True),
                    ('project_ids.departure_date', '&gt;', datetime.datetime.combine(
                      context_today() - datetime.timedelta(days=15),
                      datetime.time(0,0,0))),
                    ('project_ids.departure_date', '&lt;=', datetime.datetime.combine(
                      context_today() - datetime.timedelta(days=7),
                      datetime.time(0,0,0)))
                  ]"/>
          <separator/>
        </xpath>
      </field>
    </record>

    <!--Purchase Requisition filters -->
    <record model="ir.ui.view" id="view_purchase_requisition_filter_inh">
      <field name="name">view.purchase.requisition.filter.inh</field>
      <field name="model">purchase.requisition</field>
      <field name="inherit_id"
             ref="xhg_autrement_purchase_business_adapter.view_purchase_requisition_filter_ext"/>
      <field name="arch" type="xml">
        <xpath expr="//filter[@string='My Dossiers']" position="attributes">
          <attribute name="name">my_dossiers</attribute>
        </xpath>
        <xpath expr="//filter[@string='Dossier operation']" position="attributes">
          <attribute name="name">group_by_dossier</attribute>
        </xpath>
        <xpath expr="//group[@string='Group By']"
               position="before">
          <separator/>
          <filter string="With requisitions pendent " name="requisitions_open"
                  domain="[('account_analytic_id.open_requisitions', '!=', 0)]"/>
          <separator/>
          <filter string="Create before last week " name="before_last_week"
                  domain="[
                    ('account_analytic_id.create_date', '&lt;=', datetime.datetime.combine(
                      context_today() + datetime.timedelta(days=7),
                      datetime.time(0,0,0))
                  ]"/>
          <filter string="Create last week " name="last_week"
                  domain="[
                    ('account_analytic_id.create_date', '&gt;', datetime.datetime.combine(
                      context_today() + datetime.timedelta(days=7),
                      datetime.time(0,0,0))
                  ]"/>
          <separator/>
        </xpath>
      </field>
    </record>


  </data>
</openerp>
