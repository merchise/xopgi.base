<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
      <!-- Partner kanban view inherte -->
      <record model="ir.ui.view" id="xopgi_crm_lead_partner_kanban_view">
        <field name="name">res.partner.kanban.inherit</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.res_partner_kanban_view"/>
        <field name="priority" eval="1"/>
        <field name="arch" type="xml">
          <xpath expr="//div[@class='oe_kanban_partner_categories']"
                 position="inside">
            <field name="mobile"/>
            <field name="phone"
                   attrs="{'invisible': [('mobile','not in', ['', False, None])]}"/>
          </xpath>
        </field>
      </record>

      <!-- CRM Lead Form View  -->
      <record model="ir.ui.view" id="xopgi_crm_case_form_view_oppor">
        <field name="inherit_id" ref="crm.crm_case_form_view_oppor"/>
        <field name="model">crm.lead</field>
        <field name="arch" type="xml">
          <xpath expr="//field[@name='partner_id']" position="attributes">
            <attribute name="context">
              {'default_name': partner_name,
              'default_email': email_from,
              'default_phone': phone,
              'default_mobile': mobile}
            </attribute>
          </xpath>
          <field name="mobile" position="replace"/>
          <field name="phone" position="replace">
            <field name="mobile"/>
            <field name="phone"
                   attrs="{'invisible': ['|',
                                         ('mobile','not in', ['', False, None]),
                                         ('phone','in', ['', False, None])]}"/>
          </field>
        </field>
      </record>
    </data>
</openerp>
