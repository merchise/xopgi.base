<?xml version="1.0"?>
<openerp>
  <data>
    <record id="view_task_search_inh" model="ir.ui.view">
      <field name="name">project.task.search</field>
      <field name="model">project.task</field>
      <field name="inherit_id" ref="project.view_task_search_form"/>
      <field name="arch" type="xml">
        <xpath expr="//filter[@string='My Tasks']" position="attributes">
          <attribute name="name">my_tasks</attribute>
        </xpath>
        <xpath expr="//filter[@name='message_unread']" position="after">
          <separator/>
          <filter string="Overdue" name="overdue"
                  domain="[('date_end','&lt;', datetime.datetime.combine(
                    context_today(), datetime.time(0,0,0)))]"/>
          <filter string="To close today" name="today"
                  domain="[('date_end','&lt;=', datetime.datetime.combine(
                    context_today(), datetime.time(23,59,59)))]"/>
          <filter string="To close on next week" name="next_7_days"
                  domain="[('date_end','&lt;=', datetime.datetime.combine(
                    context_today() +  datetime.timedelta(7),
                    datetime.time(23,59,59)))]"/>
        </xpath>
      </field>
    </record>

    <record id="view_project_issue_filter_inh" model="ir.ui.view">
      <field name="name">project.issue.search</field>
      <field name="model">project.issue</field>
      <field name="inherit_id" ref="project_issue.view_project_issue_filter"/>
      <field name="arch" type="xml">
        <xpath expr="//filter[@string='My Issues']" position="attributes">
          <attribute name="name">my_issues</attribute>
        </xpath>
        <xpath expr="//filter[@name='message_unread']" position="after">
          <separator/>
          <filter string="Overdue" name="overdue"
                  domain="[('create_date','&lt;', datetime.datetime.combine(
                    context_today().replace(day=1), datetime.time(0,0,0)))]"/>
          <separator/>
          <filter string="Without activity" name="no_activity"
                  domain="[('last_message','&lt;=', datetime.datetime.combine(
                    (context_today() +  datetime.timedelta(-30)).replace(day=1),
                    datetime.time(23,59,59)))]"/>
        </xpath>
      </field>
    </record>
  </data>
</openerp>
