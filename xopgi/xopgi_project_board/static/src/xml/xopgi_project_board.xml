<?xml version="1.0" encoding="UTF-8"?>
<templates>
  <t t-name="project_widget">
    <div class="o_sales_dashboard">
      <div style="width: 50%;">
        <div class="o_highlight">
          <a href="#" class="o_dashboard_action"
             name="xhg_autrement_project_dossier.dossier_action_view_task"
             t-attf-data-context="{
                      #{values['mode'] and values['mode'] == 'company' ?
                        '' : '\'search_default_my_tasks\': 1'}
                  }">
            Tasks
          </a>
        </div>
        <table class="table table-condensed">
          <tr>
            <td class="o_main" title="New Tasks" rowspan="2"
                style="width: 15%;">
              <a href="#" class="o_dashboard_action"
                 name="xhg_autrement_project_dossier.dossier_action_view_task"
                 t-attf-data-context="{
                      #{values['mode'] and values['mode'] == 'company' ?
                        '' : '\'search_default_my_tasks\': 1,'}
                        'search_default_draft': 1
                  }">
                New:
                <br/>
                <span class="o_highlight">
                  <t t-if="values and values['task'] and
                       values['task']['new'] != 0">
                    <t t-esc="values['task']['new']"/>
                  </t>
                  <t t-if="!(values and values['task'] and
                         values['task']['new'] != 0)">
                    0
                  </t>
                </span>
              </a>
            </td>
            <td class="o_main" title="Tasks with unread messages" rowspan="2"
                style="width: 15%;">
              <a href="#" class="o_dashboard_action"
                 name="xhg_autrement_project_dossier.dossier_action_view_task"
                 t-attf-data-context="{
                      #{values['mode'] and values['mode'] == 'company' ?
                        '' : '\'search_default_my_tasks\': 1,'}
                        'search_default_message_unread': 1
                  }">
                Unread:
                <br/>
                <span class="o_highlight">
                  <t t-if="values and values['task'] and
                       values['task']['unread'] != 0">
                    <t t-esc="values['task']['unread']"/>
                  </t>
                  <t t-if="!(values and values['task'] and
                         values['task']['unread'] != 0)">
                    0
                  </t>
                </span>
              </a>
            </td>
            <td class="o_secondary" title="Tasks to close on next 7 days">
              <a href="#" class="o_dashboard_action"
                 name="xhg_autrement_project_dossier.dossier_action_view_task"
                 t-attf-data-context="{
                      #{values['mode'] and values['mode'] == 'company' ?
                        '' : '\'search_default_my_tasks\': 1,'}
                        'search_default_next_7_days': 1
                  }">
                Next week:
                <t t-if="values and values['task'] and
                     values['task']['next_7_days'] != 0">
                  <t t-esc="values['task']['next_7_days']"/>
                </t>
                <t t-if="!(values and values['task'] and
                       values['task']['next_7_days'] != 0)">
                  0
                </t>
              </a>
            </td>
          </tr>
          <tr>
            <td class="o_secondary" title="Tasks unassigned">
              <a href="#" class="o_dashboard_action"
                 name="xhg_autrement_project_dossier.dossier_action_view_task"
                 t-attf-data-context="{
                      #{values['mode'] and values['mode'] == 'company' ?
                        '' : '\'search_default_my_tasks\': 1,'}
                        'search_default_unassigned': 1
                  }">
                Unassigned:
                <t t-if="values and values['task'] and
                     values['task']['unassigned'] != 0">
                  <t t-esc="values['task']['unassigned']"/>
                </t>
                <t t-if="!(values and values['task'] and
                       values['task']['unassigned'] != 0)">
                  0
                </t>
              </a>
            </td></tr>
        </table>
        <table class="table table-condensed">
          <tr>
            <td title="Tasks to close today"
                t-attf-class="#{values and values['task'] and
                values['task']['today'] != 0 and 'o_warning' or ''}">
              <t t-if="values and values['task'] and
                        values['task']['today'] != 0">
                <a href="#" class="o_dashboard_action"
                   name="xhg_autrement_project_dossier.dossier_action_view_task"
                   t-attf-data-context="{
                      #{values['mode'] and values['mode'] == 'company' ?
                        '' : '\'search_default_my_tasks\': 1,'}
                        'search_default_today': 1
                  }">
                  Expecting close: <span t-esc="values['task']['today']"/>
                </a>
              </t>
            </td>
            <td title="Tasks overdue"
                t-attf-class="#{values and values['task'] and
                      values['task']['overdue'] != 0 and 'o_warning' or ''}">
              <t t-if="values and values['task'] and
                      values['task']['overdue'] != 0">
                <a href="#" class="o_dashboard_action"
                   name="xhg_autrement_project_dossier.dossier_action_view_task"
                   t-attf-data-context="{
                        #{values['mode'] and values['mode'] == 'company' ?
                          '' : '\'search_default_my_tasks\': 1,'}
                          'search_default_overdue': 1
                    }">
                  Overdue:
                  <span t-esc="values['task']['overdue']"/>
                </a>
              </t>
            </td>
          </tr>
        </table>
      </div><div style="width: 50%;">
        <div class="o_highlight">
          <a href="#" class="o_dashboard_action"
             name="project_issue.project_issue_categ_act0"
             t-attf-data-context="{
                      #{values['mode'] and values['mode'] == 'company' ?
                        '' : '\'search_default_my_issues\': 1'}
                  }">
            Issues
          </a>
        </div>
        <table class="table table-condensed">
          <tr>
            <td class="o_main" title="New Issues">
              <a href="#" class="o_dashboard_action"
                 name="project_issue.project_issue_categ_act0"
                 t-attf-data-context="{
                      #{values['mode'] and values['mode'] == 'company' ?
                        '' : '\'search_default_my_issues\': 1,'}
                        'search_default_draft': 1
                  }">
                New:
                <br/>
                <span class="o_highlight">
                  <t t-if="values and values['issue'] and
                       values['issue']['new'] != 0">
                    <t t-esc="values['issue']['new']"/>
                  </t>
                  <t t-if="!(values and values['issue'] and
                         values['issue']['new'] != 0)">
                    0
                  </t>
                </span>
              </a>
            </td>
            <td class="o_main" title="Issues with unread messages">
              <a href="#" class="o_dashboard_action"
                 name="project_issue.project_issue_categ_act0"
                 t-attf-data-context="{
                      #{values['mode'] and values['mode'] == 'company' ?
                        '' : '\'search_default_my_issues\': 1,'}
                        'search_default_message_unread': 1
                  }">
                Unread:
                <br/>
                <span class="o_highlight">
                  <t t-if="values and values['issue'] and
                       values['issue']['unread'] != 0">
                    <t t-esc="values['issue']['unread']"/>
                  </t>
                  <t t-if="!(values and values['issue'] and
                         values['issue']['unread'] != 0)">
                    0
                  </t>
                </span>
              </a>
            </td>
            <td class="o_secondary" title="Issues unassigned">
              <a href="#" class="o_dashboard_action"
                 name="project_issue.project_issue_categ_act0"
                 t-attf-data-context="{
                      #{values['mode'] and values['mode'] == 'company' ?
                        '' : '\'search_default_my_issues\': 1,'}
                        'search_default_unassigned': 1
                  }">
                Unassigned:
                <br/>
                <span>
                  <t t-if="values and values['issue'] and
                       values['issue']['unassigned'] != 0">
                    <t t-esc="values['issue']['unassigned']"/>
                  </t>
                  <t t-if="!(values and values['issue'] and
                         values['issue']['unassigned'] != 0)">
                    0
                  </t>
                </span>
              </a>
            </td>
          </tr>
        </table>
        <table class="table table-condensed">
          <tr>
            <td title="Issues without activity on since 2 month ago"
                t-attf-class="#{values and values['issue'] and
                values['issue']['no_activity'] != 0 and 'o_warning' or ''}">
              <t  t-if="values and values['issue'] and
                      values['issue']['no_activity'] != 0">
                <a href="#" class="o_dashboard_action"
                 name="project_issue.project_issue_categ_act0"
                 t-attf-data-context="{
                      #{values['mode'] and values['mode'] == 'company' ?
                        '' : '\'search_default_my_issues\': 1,'}
                        'search_default_no_activity': 1
                  }">
                No activity:
                <span t-esc="values['issue']['no_activity']"/>
              </a>
              </t>
            </td>
            <td title="Issues create before this month"
                t-attf-class="#{values and values['issue'] and
                values['issue']['overdue'] != 0 and 'o_warning' or ''}">
              <t  t-if="values and values['issue'] and
                      values['issue']['overdue'] != 0">
                <a href="#" class="o_dashboard_action"
                 name="project_issue.project_issue_categ_act0"
                 t-attf-data-context="{
                      #{values['mode'] and values['mode'] == 'company' ?
                        '' : '\'search_default_my_issues\': 1,'}
                        'search_default_overdue': 1
                  }">
                From last month:
                <span t-esc="values['issue']['overdue']"/>
              </a>
              </t>
            </td>
          </tr>
        </table>
      </div>
    </div>
  </t>
</templates>
